/* =======================================================
   PALETA Y RESET (mantenemos el look and feel original)
   ======================================================= */
:root{
  --bg:#0b1220;        /* fondo app */
  --card:#121b2b;      /* tarjetas/paneles */
  --text:#e9eef7;      /* texto principal */
  --muted:#9fb0ca;     /* texto secundario */

  --accent:#4FC3F7;    /* acentos (detalles) */
  --accent2:#FF7043;   /* contorno/relleno barrio */
  --baseRoute:#2ecc71; /* VÍAS (verde) */
  --danger:#ff5252;
  --ok:#3ddc97;

  --border:#26334a;
}

*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* =================== FILA 1: Encabezado =================== */
/* =================== FILA 1: Encabezado =================== */
body.vias .topbar{
  display:flex;                   /* Centrado total */
  justify-content:center;
  align-items:center;
  width:100%;
  background-color:#0f2d11;       /* color solicitado */
  border-bottom:3px solid #1b5e20;
  padding:16px 24px;
  box-sizing:border-box;
}
body.vias .logo-title{
  display:flex; align-items:center; justify-content:center;
  gap:14px; max-width:1280px; width:100%; margin:0 auto;
}
body.vias .logo{ height:90px; width:auto; }
body.vias .title{
  font-size:1.8rem; color:#fff; margin:0; text-align:center;
}

/* =================== FILA 2: Navegación =================== */
body.vias .navgrid{
  display:flex; justify-content:center; align-items:stretch; flex-wrap:wrap; gap:20px;
  background-color:#1b5e20; padding:12px; width:100%;
}
body.vias .navitem{ color:#fff; text-decoration:none; padding:8px 10px; border-radius:10px; border:1px solid transparent; }
body.vias .navitem:hover{ background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.18); }
body.vias .acerca{ display:flex; align-items:center; gap:8px; }
body.vias .acerca-logo{ width:20px; height:20px; border-radius:50%; }

/* Dropdown accesible controlado por JS */
body.vias .navgrid .dropdown{ position:relative; }
body.vias .navgrid .dropbtn{
  background:transparent; color:#fff; border:1px solid transparent;
  padding:8px 12px; border-radius:10px; cursor:pointer;
}
body.vias .navgrid .dropbtn:focus{ outline:2px solid var(--accent); outline-offset:2px; }
body.vias .navgrid .dropdown-menu{
  position:absolute; top:100%; left:0; min-width:220px;
  background:#1b5e20; border:1px solid #134718; border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
  padding:6px; margin-top:6px; list-style:none; display:none; z-index:1000;
}
body.vias .navgrid .dropdown.open .dropdown-menu{ display:block; }
body.vias .navgrid .dropdown-menu a{ display:block; color:#fff; text-decoration:none; padding:8px 10px; border-radius:8px; }
body.vias .navgrid .dropdown-menu a:hover{ background:#246b27; }


/* =======================================================
   LAYOUT PRINCIPAL: MAPA + PALETA DERECHA
   Estructura:
     .layout { #map + aside#panel }
   ======================================================= */
.layout{
  display:grid;
  grid-template-columns: 1fr 360px;   /* mapa + paleta */
  gap:0;
}
#map{
  width:100%;
  height:calc(100vh - 180px);         /* alto visible (resta topbar+nav) */
  outline:none;
  background:#0b1220;
  border-right:1px solid var(--border);
}
@media (max-width: 992px){
  .layout{ grid-template-columns: 1fr 320px; }
}
@media (max-width: 768px){
  .layout{ grid-template-columns: 1fr; }
  #map{ height:60vh; border-right:0; border-bottom:1px solid var(--border); }
}

/* =======================================================
   PALETA DERECHA (panel lateral)
   Estructura:
     aside#panel
       .panel-header (titulo + .pill)
       .msg / .msg-compact
       .legend (chips y swatches)
       .list (ol/li)
       .btn (acciones)
   ======================================================= */
#panel{
  background:var(--card);
  border-left:1px solid var(--border);
  padding:14px;
  overflow:auto;
}
.panel-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.5rem;
  margin-bottom:.6rem;
}
.panel-header strong{
  font-weight:600;
  letter-spacing:.02em;
}
.pill{
  display:inline-flex;
  align-items:center;
  height:26px;
  padding:0 .6rem;
  border-radius:999px;
  background:#0e1626;
  border:1px solid var(--border);
  color:var(--muted);
  font-size:.85rem;
}

/* Mensajes/contadores */
.msg{
  background:#0e1626;
  border:1px solid var(--border);
  border-radius:12px;
  padding:.75rem .9rem;
  margin-top:.4rem;
  color:var(--text);
}
.msg-compact{
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  padding:.45rem .6rem;
  border-radius:10px;
}
.count{
  display:inline-block;
  min-width:1.6em;
  text-align:center;
  font-variant-numeric:tabular-nums;
  font-weight:600;
  color:var(--text);
  padding:.1rem .45rem;
  border-radius:8px;
  background:#0b1220;
  border:1px solid var(--border);
}
.count.ok{ color:var(--ok); }

/* Leyenda / chips / swatches */
.legend{
  background:rgba(0,0,0,.35);
  color:var(--text);
  padding:.6rem .75rem;
  border-radius:.75rem;
  font-size:.95rem;
  border:1px solid var(--border);
  backdrop-filter:blur(4px);
  margin-top:.6rem;
}
.chip{
  display:flex;
  align-items:center;
  gap:.5rem;
  margin:.25rem 0;
}
.swatch{
  display:inline-block;
  vertical-align:middle;
  border-radius:3px;
}
.sw-base-route{ width:18px; height:3px; background:var(--baseRoute); }
/* Leyenda: intersección como ESTRELLA negra */
.sw-hit{
  width:auto; height:auto;
  background:transparent;
  border:none;
  position:relative;
  padding:0;               /* que no herede alto/ancho de .swatch */
}
.sw-hit::before{
  content:'★';
  display:inline-block;
  font-size:14px;
  line-height:1;
  color:#000;              /* estrella negra */
  text-shadow: 0 0 3px #fff, 0 0 6px rgba(0,0,0,.35); /* borde blanco suave */
}

.sw-barrio   { width:12px; height:12px; background:var(--accent2); border:2px solid var(--accent2); }

/* Lista de vías (dentro del barrio) */
.list{
  margin:.5rem 0 0 1rem;
  padding:0;
  color:var(--text);
}
.list li{
  margin:.2rem 0;
  padding-left:.2rem;
}

/* Botones utilitarios (si se usan en panel) */
.btn{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  padding:.5rem .8rem;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--card);
  color:var(--text);
  cursor:pointer;
  font-size:.95rem;
  transition:all .15s ease;
}
.btn:hover{ background:#1a263b; transform:translateY(-1px); }

/* =======================================================
   LEAFLET (coherencia con el tema)
   ======================================================= */
.leaflet-container{ background:#0b1220; }
.leaflet-control-zoom a{
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
}
.leaflet-control-zoom a:hover{ background:#1a263b; }

.leaflet-tooltip{
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  box-shadow:0 4px 12px rgba(0,0,0,.35);
}
.leaflet-tooltip:before{ border-top-color:var(--card); }

/* =======================================================
   MARCADORES / ELEMENTOS ESPECÍFICOS VÍAS
   ======================================================= */

/* Estrella negra para intersecciones */
.star-pt{
  color:#000;
  font-size:18px;
  line-height:1;
  text-shadow: 0 0 3px #fff, 0 0 6px rgba(0,0,0,.35);
  pointer-events:auto; /* permitir hover/tooltip */
}

/* Si pintas líneas SVG vía CSS */
.via-line{
  stroke:var(--baseRoute);
  stroke-width:3px;
}

/* =======================================================
   ACCESIBILIDAD Y DETALLES
   ======================================================= */
[aria-current="page"]{
  outline:2px solid #1b5e20;
  outline-offset:2px;
  border-color:#1b5e20;
}
:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
